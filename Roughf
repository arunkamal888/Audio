import java.io.*;
import java.net.URISyntaxException;
import java.net.URL;

public class PythonExecutor {
    public static void main(String[] args) {
        try {
            // Path to the audio file - ensure this path is valid in your environment
            String audioFilePath = "/path/to/your/audio.wav";

            // Get the Python script from resources
            File pythonScriptFile = getScriptFile("transcribe_audio.py");

            // Execute Python script using ProcessBuilder
            ProcessBuilder processBuilder = new ProcessBuilder("python", pythonScriptFile.getAbsolutePath(), audioFilePath);
            processBuilder.redirectErrorStream(true);
            Process process = processBuilder.start();

            // Output the result
            printProcessOutput(process);

        } catch (Exception e) {
            System.err.println("An error occurred: " + e.getMessage());
        }
    }

    private static File getScriptFile(String scriptName) throws URISyntaxException {
        URL scriptUrl = PythonExecutor.class.getClassLoader().getResource(scriptName);
        if (scriptUrl == null) {
            throw new IllegalArgumentException("Script file not found: " + scriptName);
        }
        return new File(scriptUrl.toURI());
    }

    private static void printProcessOutput(Process process) throws IOException, InterruptedException {
        try (BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()))) {
            String line;
            while ((line = reader.readLine()) != null) {
                System.out.println(line);
            }
        }
        int exitCode = process.waitFor();
        System.out.println("Process exited with code: " + exitCode);
    }
}
