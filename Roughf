 private boolean isElementAboveViewport(WebElement element) {
        int elementPosition = element.getLocation().getY();
        int viewportPosition = ((Long) ((JavascriptExecutor) driver).executeScript("return window.pageYOffset;")).intValue();
        return elementPosition < viewportPosition;
    }

    // Common method to get text from a WebElement
    public String getText(WebElement element) {
        int maxScrollAttempts = 10;  // maximum number of scroll attempts
        int scrollAttempts = 0;

        while (scrollAttempts < maxScrollAttempts) {
            try {
                if (element.isDisplayed()) {
                    return element.getText();
                } else {
                    if (isElementAboveViewport(element)) {
                        ((JavascriptExecutor) driver).executeScript("window.scrollBy(0,-250)");
                    } else {
                        ((JavascriptExecutor) driver).executeScript("window.scrollBy(0,250)");
                    }
                    Thread.sleep(500);  // brief pause to allow scrolling action to complete
                }
            } catch (NoSuchElementException | StaleElementReferenceException e) {
                System.out.println("Attempt " + (scrollAttempts + 1) + ": Element not found: " + e.getMessage());
            } catch (Exception e) {
                System.out.println("Attempt " + (scrollAttempts + 1) + ": Error while getting text from element: " + e.getMessage());
            }
            scrollAttempts++;
        }

        System.out.println("Failed to retrieve text from the element after " + maxScrollAttempts + " scroll attempts.");
        return null;
    }
}
